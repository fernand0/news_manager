# News Manager

A command-line interface (CLI) that uses the Gemini API to generate news articles from a text file or a URL.

## Configuration

### 1. API Key

This project uses the Google Gemini API. You need to provide your API key in an environment file.

1.  Create a file named `.env` in the root of the project.
2.  Add your API key to the file like this:

    ```
    GOOGLE_API_KEY="YOUR_API_KEY_HERE"
    ```

> **Note:** The `.env` file is included in `.gitignore` and should not be committed to your repository.

### 2. Input File Configuration (Opcional)

You can configure a default input file using an environment variable:

```bash
# En tu archivo .env
NEWS_INPUT_FILE="/ruta/a/tu/archivo/por/defecto.txt"
```

Or set it in your shell:
```bash
export NEWS_INPUT_FILE="/ruta/a/tu/archivo/por/defecto.txt"
```

### 3. Output Directory Configuration (Opcional)

You can configure a default output directory for saving generated files using an environment variable:

```bash
# En tu archivo .env
NEWS_OUTPUT_DIR="/ruta/a/tu/directorio/de/salida"
```

Or set it in your shell:
```bash
export NEWS_OUTPUT_DIR="/ruta/a/tu/directorio/de/salida"
```

When this variable is set, the generated news and Bluesky files will be automatically saved to this directory without needing to specify `--output-dir` each time.

## Installation

First, clone the repository and navigate into the project directory:

```bash
git clone https://github.com/fernand0/news_manager.git
cd news_manager
```

### 1. Create a Virtual Environment

It is highly recommended to use a virtual environment.

**Using `venv`:**
```bash
python -m venv .venv
source .venv/bin/activate
```

**Using `uv`:**
```bash
uv venv
source .venv/bin/activate
```

### 2. Install Dependencies

Install the required packages, including the Gemini API client.

**Using `pip`:**
```bash
pip install -r requirements.txt
```

**Using `uv`:**
```bash
uv pip install -r requirements.txt
```

### 3. Install the CLI

Install the project in "editable" mode.

**Using `pip`:**
```bash
pip install -e .
```

**Using `uv`:**
```bash
uv pip install -e .
```

## Usage

### `generate`

Generates a news story by sending the content of an input file or a URL to the Gemini API.

**Opciones de entrada (exclusivas):**

- `--input-file` / `-i`: Archivo de texto local
- `--url`: URL de una noticia online

**Opciones de personalización:**

- `--prompt-extra`: Instrucciones adicionales para personalizar la generación
- `--interactive-prompt`: Modo interactivo para añadir instrucciones personalizadas
- `--output-dir`: Directorio donde guardar los archivos generados (por defecto: usa NEWS_OUTPUT_DIR o no guarda archivos)

> **Nota:** No puedes usar ambas opciones de entrada al mismo tiempo. Si usas ambas, el comando mostrará un error.

**Ejemplos de uso:**

1. **Desde archivo local**
   ```bash
   news-manager generate --input-file ./mi_noticia.txt
   # o
   news-manager generate -i ./mi_noticia.txt
   ```

2. **Desde una URL**
   ```bash
   news-manager generate --url "https://www.bbc.com/mundo/noticias-xxxxxx"
   ```

3. **Archivo por defecto**
   ```bash
   news-manager generate
   # Usará /tmp/noticia.txt o el archivo configurado en NEWS_INPUT_FILE
   ```

4. **Con instrucciones personalizadas**
   ```bash
   # Centrarse en una persona específica
   news-manager generate --url "https://ejemplo.com/noticia" --prompt-extra "céntrate en María Santos e ignora el resto"
   
   # Enfocar en un aspecto particular
   news-manager generate -i noticia.txt --prompt-extra "enfócate solo en los aspectos tecnológicos"
   
   # Cambiar el tono
   news-manager generate --url "https://ejemplo.com" --prompt-extra "usa un tono más formal y académico"
   
   # Modo interactivo (se te preguntará qué instrucciones quieres)
   news-manager generate --url "https://ejemplo.com" --interactive-prompt
   ```

5. **Guardando archivos generados**
   ```bash
   # Especificar directorio de salida manualmente
   news-manager generate --url "https://ejemplo.com" --output-dir ./mis_noticias
   
   # Usar directorio configurado en NEWS_OUTPUT_DIR
   export NEWS_OUTPUT_DIR="/home/usuario/noticias"
   news-manager generate --url "https://ejemplo.com"
   # Los archivos se guardarán automáticamente en /home/usuario/noticias
   ```

**Opciones avanzadas:**
```bash
# Ver ayuda del comando
news-manager generate --help
```

**Example Output:**

The output will be the formatted news article generated by the Gemini API.
```
--- Inicializando cliente AI y generando noticia... ---
Título: Descubren nueva especie de mariposa luminiscente en el Amazonas los doctores Alistair Finch y Elena Vance
Texto: El Dr. Alistair Finch, un biólogo de la Universidad de Greendale, junto a la Dra. Elena Vance, ha anunciado el descubrimiento de una nueva especie de mariposa que brilla en la oscuridad en la selva amazónica. Este hallazgo ha sido publicado en un reciente estudio científico.

La investigación detalla las características únicas de este insecto, que utiliza la bioluminiscencia como un posible mecanismo de defensa y comunicación. El Dr. Finch ha dedicado más de una década al estudio de la entomología en la región, mientras que la Dra. Vance es una experta en genética de insectos. La Universidad de Greendale ha financiado gran parte de esta expedición.
Enlaces:
- https://ejemplo.com/noticia-original
Bluesky: Descubierta una nueva especie de mariposa luminiscente en el Amazonas por los doctores Alistair Finch y Elena Vance. Este increíble hallazgo abre nuevas puertas a la investigación de la bioluminiscencia. #ciencia #naturaleza #descubrimiento [enlace a la noticia]
```

### `hello`

Prints a welcome message to confirm that the `news-manager` CLI is correctly installed and accessible in your environment.

**How to run:**
```bash
news-manager hello
```

**Example Output:**
```
Welcome to News Manager CLI!
This tool helps you generate and manage news content using the Gemini API.
Try 'news-manager generate' to create a news story or 'news-manager --help' for more commands.
```

---

## About This Project

This project was developed using a "vibe coding" approach with the [Gemini AI CLI](https://developers.google.com/gemini/ai-hub/docs/cli). The process involved a conversational flow to build, refactor, and enhance the application step by step.
